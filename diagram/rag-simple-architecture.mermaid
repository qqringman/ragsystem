graph TB
    %% ä½¿ç”¨è€…å±¤
    subgraph "ä½¿ç”¨è€…ä»‹é¢å±¤"
        USER[ğŸ‘¤ ä½¿ç”¨è€…]
        USER --> WEB[ğŸŒ ç¶²é ä»‹é¢<br/>Streamlit]
        USER --> CLI[ğŸ’» å‘½ä»¤åˆ—ä»‹é¢]
    end
    
    %% æ‡‰ç”¨å±¤
    subgraph "æ‡‰ç”¨é‚è¼¯å±¤"
        WEB --> CORE[ğŸ§  RAG æ ¸å¿ƒå¼•æ“<br/>rag_chain.py]
        CLI --> CORE
        CONFIG[âš™ï¸ é…ç½®ç®¡ç†<br/>config/] --> CORE
    end
    
    %% è™•ç†å±¤
    subgraph "æ™ºæ…§è™•ç†å±¤"
        CORE --> PROCESS{è™•ç†é¡å‹}
        
        PROCESS -->|æ–‡ä»¶æŸ¥è©¢| DOC_FLOW[ğŸ“„ æ–‡ä»¶è™•ç†æµç¨‹]
        DOC_FLOW --> PARSE[è§£ææ–‡ä»¶<br/>PDF/Word/Excel/etc]
        PARSE --> SPLIT[åˆ†å‰²æ–‡å­—<br/>Chunks]
        SPLIT --> EMBED[å‘é‡åŒ–<br/>Embeddings]
        EMBED --> VECTOR_STORE[å­˜å…¥å‘é‡DB]
        VECTOR_STORE --> SEARCH[ç›¸ä¼¼åº¦æœå°‹]
        
        PROCESS -->|è³‡æ–™åº«æŸ¥è©¢| DB_FLOW[ğŸ—„ï¸ è³‡æ–™åº«æµç¨‹]
        DB_FLOW --> NL2SQL[è‡ªç„¶èªè¨€â†’SQL]
        NL2SQL --> EXECUTE[åŸ·è¡ŒæŸ¥è©¢]
        EXECUTE --> FORMAT[æ ¼å¼åŒ–çµæœ]
    end
    
    %% AI å±¤
    subgraph "AI æ¨¡å‹å±¤"
        SEARCH --> LLM[ğŸ¤– èªè¨€æ¨¡å‹]
        FORMAT --> LLM
        NL2SQL --> LLM
        
        LLM_OPTIONS[æ¨¡å‹é¸é …]
        LLM_OPTIONS --> FREE_LLM[å…è²»: Ollama<br/>Llama3/Mistral]
        LLM_OPTIONS --> PAID_LLM[ä»˜è²»: OpenAI/Claude]
        
        EMBED_OPTIONS[åµŒå…¥é¸é …]
        EMBED_OPTIONS --> FREE_EMBED[å…è²»: HuggingFace]
        EMBED_OPTIONS --> PAID_EMBED[ä»˜è²»: OpenAI]
    end
    
    %% å„²å­˜å±¤
    subgraph "è³‡æ–™å„²å­˜å±¤"
        VECTOR_STORE -.-> VDBS[(å‘é‡è³‡æ–™åº«<br/>Chroma/Redis/Qdrant)]
        EXECUTE -.-> RDBS[(é—œè¯å¼è³‡æ–™åº«<br/>PostgreSQL/MySQL)]
    end
    
    %% çµæœè¿”å›
    LLM --> RESULT[ğŸ“Š ç”Ÿæˆç­”æ¡ˆ]
    RESULT --> HIGHLIGHT[âœ¨ é‡é»æ¨™è¨»]
    HIGHLIGHT --> USER
    
    %% æ¨£å¼
    classDef userStyle fill:#e3f2fd,stroke:#1565c0,stroke-width:3px
    classDef coreStyle fill:#fff3e0,stroke:#e65100,stroke-width:3px
    classDef processStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef aiStyle fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    classDef dbStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef resultStyle fill:#fff9c4,stroke:#f57f17,stroke-width:3px
    
    class USER,WEB,CLI userStyle
    class CORE,CONFIG coreStyle
    class DOC_FLOW,DB_FLOW,PARSE,SPLIT,EMBED,SEARCH,NL2SQL,EXECUTE,FORMAT processStyle
    class LLM,FREE_LLM,PAID_LLM,FREE_EMBED,PAID_EMBED aiStyle
    class VDBS,RDBS dbStyle
    class RESULT,HIGHLIGHT resultStyle