# ğŸ§  RAG å…¨åŠŸèƒ½ç³»çµ±æ¶æ§‹ç¸½è¦½

## ğŸ“‹ ç³»çµ±æ¦‚è¿°

RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»çµ±æ˜¯ä¸€å€‹ä¼æ¥­ç´šçš„æ™ºæ…§å•ç­”å¹³å°ï¼Œæ•´åˆäº†æ–‡ä»¶æª¢ç´¢ã€è³‡æ–™åº«æŸ¥è©¢å’Œ AI ç”ŸæˆåŠŸèƒ½ã€‚

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ§‹

### 1. **æ‡‰ç”¨å±¤** 
- **Web UI** (`app.py`) - Streamlit ç¶²é ä»‹é¢
- **CLI** (`main.py`) - å‘½ä»¤åˆ—ä»‹é¢

### 2. **æ ¸å¿ƒå¼•æ“** 
- **RAG Chain** (`rag_chain.py`) - å”èª¿æ‰€æœ‰æ¨¡çµ„çš„ä¸­å¤®è™•ç†å™¨
- **Config** (`config/`) - çµ±ä¸€é…ç½®ç®¡ç†

### 3. **æ™ºæ…§è™•ç†æ¨¡çµ„**

#### ğŸ“„ æ–‡ä»¶è™•ç†ç®¡é“
```
ä¸Šå‚³æ–‡ä»¶ â†’ è§£æ â†’ åˆ†å‰² â†’ å‘é‡åŒ– â†’ å„²å­˜ â†’ æª¢ç´¢ â†’ ç”Ÿæˆç­”æ¡ˆ
```
- **æ”¯æ´æ ¼å¼**ï¼šPDF, Word, Excel, Markdown, HTML, JSON, TXT
- **è™•ç†æµç¨‹**ï¼š
  - æ–‡ä»¶è§£æ (`loader/doc_parser.py`)
  - æ–‡å­—åˆ†å‰² (chunk_size=1000, overlap=100)
  - å‘é‡åµŒå…¥ (OpenAI/HuggingFace)
  - ç›¸ä¼¼åº¦æœå°‹

#### ğŸ—„ï¸ è³‡æ–™åº«æŸ¥è©¢ç®¡é“
```
è‡ªç„¶èªè¨€ â†’ SQLè½‰æ› â†’ æŸ¥è©¢åŸ·è¡Œ â†’ çµæœæ ¼å¼åŒ– â†’ ç”Ÿæˆç­”æ¡ˆ
```
- **æ”¯æ´è³‡æ–™åº«**ï¼šPostgreSQL, MySQL
- **å®‰å…¨æ©Ÿåˆ¶**ï¼šSQL æ³¨å…¥é˜²è­·
- **æ™ºæ…§è½‰æ›**ï¼šè‡ªç„¶èªè¨€è½‰ SQL

### 4. **AI æ¨¡å‹å±¤**

#### ğŸ¤– èªè¨€æ¨¡å‹ (LLM)
- **å…è²»é¸é …**ï¼š
  - Ollama (æœ¬åœ°é‹è¡Œ)
    - Llama3 (å»ºè­°)
    - Mistral
    - Gemma
- **ä»˜è²»é¸é …**ï¼š
  - OpenAI (GPT-3.5/GPT-4)
  - Anthropic (Claude)

#### ğŸ”¤ åµŒå…¥æ¨¡å‹
- **å…è²»é¸é …**ï¼šHuggingFace (all-MiniLM-L6-v2)
- **ä»˜è²»é¸é …**ï¼šOpenAI Embeddings

### 5. **è³‡æ–™å„²å­˜å±¤**

#### å‘é‡è³‡æ–™åº«
- **Chroma** - æœ¬åœ°æŒä¹…åŒ–ï¼ˆé è¨­ï¼‰
- **Redis** - åˆ†æ•£å¼å¿«å–
- **Qdrant** - é›²ç«¯æ“´å±•

#### é—œè¯å¼è³‡æ–™åº«
- **PostgreSQL** - ä¸»è¦é¸é …
- **MySQL** - æ›¿ä»£æ–¹æ¡ˆ

## ğŸŒŸ ç³»çµ±ç‰¹è‰²

### 1. **æ¨¡çµ„åŒ–è¨­è¨ˆ**
- æ¯å€‹çµ„ä»¶éƒ½å¯ç¨ç«‹æ›¿æ›
- æ”¯æ´å¤šç¨® LLM å’Œå‘é‡è³‡æ–™åº«
- æ˜“æ–¼æ“´å±•æ–°åŠŸèƒ½

### 2. **æˆæœ¬å„ªåŒ–**
- é è¨­ä½¿ç”¨å…è²»æœå‹™ï¼ˆOllama + HuggingFaceï¼‰
- å¯é¸ä»˜è²»æœå‹™ä»¥æå‡æ•ˆèƒ½
- æœ¬åœ°è™•ç†é¸é …ä¿è­·éš±ç§

### 3. **ä¼æ¥­ç´šåŠŸèƒ½**
- å¤šæ ¼å¼æ–‡ä»¶æ”¯æ´
- SQL è³‡æ–™åº«æ•´åˆ
- æ‰¹æ¬¡è™•ç†èƒ½åŠ›
- å®Œæ•´çš„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒ

### 4. **éƒ¨ç½²éˆæ´»æ€§**
- Docker å®¹å™¨åŒ–éƒ¨ç½²
- æœ¬åœ° Python ç’°å¢ƒ
- é›²ç«¯æ“´å±•æ”¯æ´

## ğŸ“Š è³‡æ–™æµç¨‹

```mermaid
graph LR
    A[ä½¿ç”¨è€…æŸ¥è©¢] --> B{è³‡æ–™ä¾†æº}
    B -->|æ–‡ä»¶| C[æª¢ç´¢ç›¸é—œæ–‡ä»¶]
    B -->|è³‡æ–™åº«| D[åŸ·è¡ŒSQLæŸ¥è©¢]
    C --> E[æ§‹å»ºä¸Šä¸‹æ–‡]
    D --> E
    E --> F[LLMç”Ÿæˆç­”æ¡ˆ]
    F --> G[è¿”å›çµæœ]
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å…è²»æ¨¡å¼ï¼ˆæ¨è–¦ï¼‰
```bash
# 1. å®‰è£ Ollama
curl -fsSL https://ollama.com/install.sh | sh

# 2. å•Ÿå‹•ç³»çµ±
./start_ollama.sh
streamlit run app.py
```

### Docker éƒ¨ç½²
```bash
docker-compose up -d
```

## ğŸ“ ç›®éŒ„çµæ§‹

```
rag-system/
â”œâ”€â”€ ğŸ¯ app.py              # Web UI å…¥å£
â”œâ”€â”€ ğŸ’» main.py             # CLI å…¥å£
â”œâ”€â”€ ğŸ§  rag_chain.py        # æ ¸å¿ƒå¼•æ“
â”œâ”€â”€ âš™ï¸  config/            # é…ç½®ç®¡ç†
â”œâ”€â”€ ğŸ¤– llm/               # LLM æ¨¡çµ„
â”œâ”€â”€ ğŸ“„ loader/            # æ–‡ä»¶è¼‰å…¥å™¨
â”œâ”€â”€ ğŸ” vectorstore/       # å‘é‡è³‡æ–™åº«
â”œâ”€â”€ ğŸ—„ï¸  db/               # SQL è³‡æ–™åº«
â”œâ”€â”€ ğŸ› ï¸  utils/            # å·¥å…·å‡½æ•¸
â””â”€â”€ ğŸ§ª tests/            # æ¸¬è©¦å¥—ä»¶
```

## ğŸ’¡ ä½¿ç”¨å»ºè­°

1. **é–‹ç™¼æ¸¬è©¦**ï¼šä½¿ç”¨ Ollama + Chroma
2. **ç”Ÿç”¢ç’°å¢ƒ**ï¼šè€ƒæ…® OpenAI + Redis/Qdrant
3. **è³‡æºå—é™**ï¼šä½¿ç”¨ gemma:2b æ¨¡å‹
4. **é«˜å“è³ªéœ€æ±‚**ï¼šä½¿ç”¨ GPT-4 æˆ– Claude

## ğŸ”§ æ“´å±•é»

- æ–°å¢æ–‡ä»¶æ ¼å¼ï¼šåœ¨ `loader/doc_parser.py` æ·»åŠ 
- æ–°å¢ LLMï¼šåœ¨ `llm/provider_selector.py` æ·»åŠ 
- æ–°å¢å‘é‡ DBï¼šåœ¨ `vectorstore/index_manager.py` æ·»åŠ 
- å®¢è£½åŒ– UIï¼šä¿®æ”¹ `app.py` æˆ–å‰µå»ºæ–°ä»‹é¢

---

é€™å€‹ç³»çµ±è¨­è¨ˆéˆæ´»ã€åŠŸèƒ½å®Œæ•´ï¼Œæ—¢å¯ä»¥å®Œå…¨å…è²»é‹è¡Œï¼Œä¹Ÿèƒ½æ ¹æ“šéœ€æ±‚å‡ç´šåˆ°å•†æ¥­æœå‹™ã€‚